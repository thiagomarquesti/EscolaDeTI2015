<script src="js/datepicker-custom.js" type="text/javascript"></script>
<script src="bootstrap/neon/js/bootstrap-switch.min.js" type="text/javascript"></script>
<div ng-init="carregarIndios()" class="panel panel-info">

    <div class="panel-heading"> 
        <div class="panel-title" ng-show="isNovoIndio">Cadastrar indígena</div>
        <div class="panel-title" ng-show="!isNovoIndio">Alterar indígena</div>
        <div class="panel-options">
            <a href="" data-rel="collapse"><i class="entypo-down-open-big"></i></a>
        </div>
    </div>
    <div class="panel-body">
        <form name="formInd" novalidate class="form-horizontal form-groups-bordered">
            
            <div class="form-group">    
                <label for="nome" class="col-md-2 control-label">Código Assindi:</label>
                <div class="col-md-2 col-xs-12"><input type="text" ng-model="indio.cod" id="cod" name="cod" required="" class="form-control" ng-minlength=8 ng-maxlength=8></div>
            </div>

            <div ng-show="formInd.cod.$dirty && formInd.cod.$invalid" class="alert alert-danger" role="alert" class="col-md-12">
                <span ng-show="formInd.nome.$error.required">Preencha o código Assindi. </span>
                <span ng-show="formInd.nome.$error.minlength">Código deve ter 8 caracteres. </span>
                <span ng-show="formInd.nome.$error.maxlength">Código deve ter 8 caracteres. </span>
            </div>
            
            <div class="form-group">    
                <label for="nome" class="col-md-2 control-label">Nome:</label>
                <div class="col-md-10"><input type="text" ng-model="usuario.nome" id="nome" name="nome" required="" class="form-control" ng-minlength=3 ng-maxlength=50></div>
            </div>

            <div ng-show="formInd.nome.$dirty && formInd.nome.$invalid" class="alert alert-danger" role="alert" class="col-md-12">
                <span ng-show="formInd.nome.$error.required">Preencha seu nome completo. </span>
                <span ng-show="formInd.nome.$error.minlength">Nome deve ter mais de 3 caracteres. </span>
                <span ng-show="formInd.nome.$error.maxlength">Nome não pode ter mais de 50 caracteres. </span>
            </div>
            
            <div class="form-group">
                <label for="etnia" class="col-md-2 control-label">Etnia: </label>
                <div class="col-md-4">
                    <select ng-model="indio.etnia" id="etnia" name="etnia" required="" class="form-control">
                        <option value="">Selecione a etnia</option>
                        <!-- FAZER BUSCA POR ETNIAS -->
                    </select>
                </div>
            </div>
            
            <div ng-show="formInd.etnia.$dirty && formInd.etnia.$invalid" class="alert alert-danger" role="alert" class="col-md-offset-2 col-md-10" >
                <span ng-show="formInd.etnia.$error.required">Selecione uma etnia. </span>
            </div>
            
            <div class="form-group"> 
                <label for="cpf" class="col-md-2 control-label">CPF:</label>
                <div class="col-md-4"><input type="text" ng-model="indio.cpf" id="cpf" name="cpf" required="" cpf-unique class="form-control"></div>
            </div>

            <div ng-show="formInd.cpf.$dirty && formInd.cpf.$invalid" class="alert alert-danger" role="alert" class="col-md-offset-2 col-md-10">
                <span ng-show="formInd.cpf.$error.required">Preencha o CPF. </span>
                <span ng-show="formInd.cpf.$error.uncpf">CPF já cadastrado. </span>
            </div>
            
            <div class="form-group">
                <label for="genero" class="col-md-2 control-label">Gênero:</label>
                <div class="col-md-10">
                    <div class="make-switch gamb-switch" data-on="primary" data-off="info" data-on-label="M" data-off-label="F" data-text-label="<i class='fa fa-male'></i><i class='fa fa-female'></i>">
                        <input type="checkbox" ng-model="indio.genero" id="genero" name="genero" ng-true-value="masculino" ng-false-value="feminino" checked="" ng-checked="true">
                        
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label for="datanasc" class="col-md-2 control-label">Data de nascimento: </label>
                <div class="col-md-10">
                    <div class="col-md-3 input-group">
                        <input type="text" ng-model="indio.datanasc" id="datanasc" name="datanasc" class="form-control datepicker" data-start-view="2" data-end-date="-1d" data-format="dd/mm/yyyy">
                        <div class="input-group-addon"> <a href="#"><i class="entypo-calendar"></i></a> </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="cep" class="col-md-2 control-label">CEP: </label>
                <div class="col-md-2"><input type="text" ng-model="indio.cep" id="cep" name="cep" required="" class="form-control"></div>
                <label for="uf" class="col-md-1 control-label">Estado: </label>
                <div class="col-md-3">
                    <select ng-model="indio.uf" id="uf" name="uf" required="" class="form-control">
                        <option value="">Selecione um estado</option>
                        <!-- FAZER BUSCA POR ESTADOS -->
                    </select>
                </div>
                <label for="cidade" class="col-md-1 control-label">Cidade: </label>
                <div class="col-md-3">
                    <select ng-model="indio.cidade" id="cidade" name="cidade" required="" class="form-control">
                        <option value="">Aguardando estado...</option>
                        <!-- FAZER BUSCA POR CIDADES -->
                    </select>
                </div>
            </div>

            <div ng-show="(formInd.cep.$dirty && formInd.cep.$invalid) || (formInd.uf.$dirty && formInd.uf.$invalid) || (formInd.cidade.$dirty && formInd.cidade.$invalid)" class="alert alert-danger" role="alert" class="col-md-offset-2 col-md-10" >
                <span ng-show="formInd.cep.$error.required">Preencha CEP. </span>
                <span ng-show="formInd.uf.$error.required">Selecione estado. </span>
                <span ng-show="formInd.cidade.$error.required">Selecione cidade. </span>
            </div>

            <div class="form-group">
                <label for="endereco" class="col-md-2 control-label">Endereço: </label>
                <div class="col-md-10 form-group">
                    <div class="col-md-8 col-sm-8"><input type="text" ng-model="indio.endereco" id="endereco" name="endereco" required="" class="form-control" placeholder="Logradouro (Rua, Estrada, etc)"></div>
                    <div class="col-md-2 col-sm-4"><input type="text" ng-model="indio.numero" id="numero" name="numero" required="" class="form-control" placeholder="nº"></div>
                </div>
            </div>
            
            <div ng-show="(formInd.endereco.$dirty && formInd.endereco.$invalid) || (formInd.numero.$dirty && formInd.numero.$invalid)" class="alert alert-danger" role="alert" class="col-md-offset-2 col-md-10" >
                <span ng-show="formInd.endereco.$error.required">Preencha o endereço. </span>
                <span ng-show="formInd.numero.$error.required">Preencha o número. </span>
            </div>
            
            <div class="form-group">
                <label for="complemento" class="col-md-2 control-label">Complemento: </label>
                <div class="col-md-3"><input type="text" ng-model="indio.complemento" id="complemento" name="complemento" class="form-control"></div>
                <label for="bairro" class="col-md-1 control-label">Bairro: </label>
                <div class="col-md-4"><input type="text" ng-model="indio.bairro" id="bairro" name="bairro" required="" class="form-control"></div>
            </div>
            
            <div ng-show="formInd.bairro.$dirty && formInd.bairro.$invalid" class="alert alert-danger" role="alert" class="col-md-offset-2 col-md-10" >
                <span ng-show="formInd.bairro.$error.required">Preencha o bairro. </span>
            </div>
            
            <div class="form-group">
                <label for="telefone" class="col-md-2 control-label">Telefone principal: </label>
                <div class="col-md-3"><input type="text" ng-model="indio.telefone" id="telefone" name="telefone" required="" class="form-control" placeholder="(99) 99999-9999"></div>
                <label for="telefone2" class="col-md-2 control-label">Telefone secundário: </label>
                <div class="col-md-3"><input type="text" ng-model="indio.telefone2" id="telefone2" name="telefone2" class="form-control" placeholder="(99) 99999-9999"></div>
            </div>
            
            <div ng-show="formInd.telefone.$dirty && formInd.telefone.$invalid" class="alert alert-danger" role="alert" class="col-md-offset-2 col-md-10" >
                <span ng-show="formInd.telefone.$error.required">Preencha o telefone principal. </span>
            </div>
            
            <div class="form-group">    
                <label for="convenios" class="col-md-2 control-label">Convênios: </label>
                <div class="col-md-10"><input type="text" ng-model="usuario.convenios" id="convenios" name="convenios" class="form-control"></div>
            </div>

            <div class="form-group">
                <label for="tfoto" class="col-md-2 control-label">Foto: </label>
                <div class="col-md-2"><a href="javascript:;" onclick="jQuery('#fotoModal').modal('show', {backdrop: 'static'});" class="btn btn-info"><i class="fa fa-camera"></i> Tirar foto</a></div>
                <label for="foto" class="col-md-1 control-label">OU: </label>
                <div class="col-md-3"><input type="file" ng-model="indio.foto" id="foto" name="foto" class="form-control btn btn-info"></div>
            </div>
            
            <div class="modal fade" id="fotoModal" data-backdrop="static">
                <div class="modal-dialog">
                    <div class="modal-content">

                        <div class="modal-header">
                                <h4 class="modal-title">Tire a foto</h4>
                        </div>

                        <div class="modal-body">
                            <div class="row">
                                <div class="ng-camera" ng-controller="CameraController as vm">
                                    <div class="col-md-6 col-sm-12">    
                                        <ng-camera
                                            capture-message="Click!"
                                            countdown="1"
                                            output-height="360"
                                            output-width="480"
                                            viewer-height="360"
                                            viewer-width="480"
                                            image-format="jpeg"
                                            jpeg-quality="100"
                                            action-message="Tirar foto"
                                            snapshot="vm.picture"
                                            flash-fallback-url="img/webcam.swf"
                                            overlay-url="img/overlay.png"
                                            shutter-url="sound/shutter.mp3"
                                        ></ng-camera>
                                    </div>
                                    <div class="col-md-6 col-sm-12">
                                        <img ng-if="vm.picture" ng-src="{{vm.picture}}" alt="Foto">
                                    </div>
                                </div>  
                            </div>
                        </div>

                        <div class="modal-footer">
                            <div class="col-md-12">
                                <button type="button" class="btn btn-success" data-dismiss="modal">Continue</button>
                            </div>
                        </div>
                    </div>
		</div>
            </div>
            

</form>
</div>
</div>

<div>
    <button ng-show="isNovoIndio" ng-click="salvarIndio()" ng-disabled="!formInd.$valid" class="btn btn-success">Cadastrar</button>
    <button ng-hide="isNovoIndio" ng-click="salvarIndio()" ng-disabled="!formInd.$valid" class="btn btn-success">Alterar</button>
    <button ng-show="isNovoIndio" ng-click="reset(formInd)" class="btn btn-info">Limpar</button>
</div>

<script src="js/webcam.js" type="text/javascript"></script>
<script src="js/ng-camera.js" type="text/javascript"></script>